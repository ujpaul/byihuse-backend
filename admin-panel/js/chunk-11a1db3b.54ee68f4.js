(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11a1db3b"],{"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7");function n(e,t,a,n,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var i=e.apply(t,a);function c(e){n(i,r,s,c,o,"next",e)}function o(e){n(i,r,s,c,o,"throw",e)}c(void 0)}))}}},2838:function(e,t,a){"use strict";var n=a("9da3"),r=a.n(n);r.a},"2e6d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"pa-4 pt-0 emb-card mb-6"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8",md:"5",lg:"5"}},[a("h4",{staticClass:"mb-6"},[e._v("All agents")])]),a("v-col",{attrs:{cols:"12",sm:"8",md:"5",lg:"5"}},[a("v-text-field",{attrs:{label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("div",{staticClass:"emb-card pa-4"},[a("agent",{attrs:{search:e.search}})],1)])},r=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-responsive"},[a("v-data-table",{attrs:{headers:e.headers,items:e.messageList,"items-per-page":15,search:e.search,align:"center"},scopedSlots:e._u([{key:"item.balance",fn:function(t){var n=t.item;return[a("a",{staticClass:"accent--text"},[e._v(e._s(n.balance))])]}},{key:"item.action",fn:function(t){var n=t.item;return[a("v-btn",{staticClass:"pay primary",attrs:{tile:"",small:"",elevation:"0"},on:{click:function(t){return e.checkPaymentHistrory(n.history)}}},[e._v(" History ")]),a("v-btn",{staticClass:"ml-2 pay primary",attrs:{tile:"",small:"",elevation:"0"},on:{click:function(t){return e.payAnAGentOPen(n)}}},[e._v(" Pay agent ")])]}}])}),a("v-dialog",{attrs:{"max-width":"800"},model:{value:e.openHistroy,callback:function(t){e.openHistroy=t},expression:"openHistroy"}},[a("v-card",{staticClass:"py-6 px-4"},[a("v-data-table",{attrs:{headers:e.PaymentHistory,items:e.paymentHistoryData,"items-per-page":15,search:e.search,align:"center"}}),a("div",{staticClass:"paymethod"},[a("v-btn",{staticClass:"primary",on:{click:function(t){e.openHistroy=!1}}},[e._v("Close")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("v-card",{staticClass:"py-6 px-4"},[a("div",{staticClass:"flexDirection"},[a("div",{staticClass:"input"},[a("v-text-field",{attrs:{label:"RWF Amount",id:"input",solo:""},model:{value:e.Paymoney,callback:function(t){e.Paymoney=t},expression:"Paymoney"}})],1),a("v-select",{attrs:{label:"payment method",items:e.paymentMethod},model:{value:e.payment,callback:function(t){e.payment=t},expression:"payment"}})],1),a("v-card-actions",{staticClass:"layout justify-center"},[a("v-btn",{attrs:{loading:e.loading,color:"primary"},on:{click:function(t){e.open=!1,e.payAgent=!1}}},[e._v("Close")]),a("v-btn",{attrs:{loading:e.loading,color:"accent"},on:{click:e.payAgentt}},[e._v("OK")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:e.payAgent,callback:function(t){e.payAgent=t},expression:"payAgent"}},[a("v-card",{staticClass:"py-6 px-4"},[a("div",{attrs:{id:"card"}},[a("div",{staticClass:"froom"},[a("div",{staticClass:"tite"},[e._v(" First Name: ")]),a("div",[e._v(" "+e._s(e.selectedAgent.firstName)+" ")])]),a("div",{staticClass:"froom"},[a("div",{staticClass:"tite"},[e._v("last Name:")]),a("div",[e._v(e._s(e.selectedAgent.lastName))])]),a("div",{staticClass:"froom"},[a("div",{staticClass:"tite"},[e._v("Email:")]),a("div",[e._v(e._s(e.selectedAgent.email))])]),a("div",{staticClass:"froom"},[a("di",{staticClass:"tite"},[e._v("Code:")]),a("di",[e._v(e._s(e.selectedAgent.code))])],1),a("div",{staticClass:"froom"},[a("div",{staticClass:"tite"},[e._v("Balance:")]),a("div",{staticClass:"accent--text"},[e._v(e._s(e.selectedAgent.balance))])]),a("div",{staticClass:"maakeItCenter mb-4"},[a("v-btn",{staticClass:"accent mt-2 ml-3",on:{click:e.payingMethod}},[e._v("make Payment")])],1),a("div",{staticClass:"maakeItCenter"},[a("v-btn",{staticClass:"primary",on:{click:function(t){e.payAgent=!1}}},[e._v("close")])],1)])])],1),a("emb-delete-confirmation-2",{ref:"deleteConfirmationDialog",attrs:{messageTitle:"Are You Sure You Want To Delete?",messageDescription:"Are you sure you want to delete this invoice permanently?",btn1:"Cancel",btn2:"Yes"},on:{onConfirm:e.ondeleteItemFromInvoicesList}})],1)},i=[],c=(a("4160"),a("c975"),a("a434"),a("b680"),a("159b"),a("96cf"),a("1da1")),o=a("5530"),l=a("3786"),u=a("c1df"),m=a.n(u),p=a("2f62"),d={computed:Object(o["a"])({},Object(p["b"])(["linksformbackend"])),props:{search:{default:null,type:String}},data:function(){return{selectedMessage:"",open:null,Departments:["SENT","RECEIVED","CANCELED","TECHNICIAN-ON-THE-WAY","TECHNICIAN-AT-SITE","JOB-DONE"],editDialog:!1,invoiceList:null,headers:[{text:"First Name",sortable:!1,value:"firstName"},{text:"Last Name",sortable:!1,value:"lastName"},{text:"Email",sortable:!1,value:"email"},{text:"Approved",sortable:!1,value:"approved"},{text:"Code",sortable:!1,value:"code"},{text:"balance",sortable:!1,value:"balance"},{text:"Action",sortable:!1,value:"action"}],PaymentHistory:[{text:"Time",sortable:!1,value:"time"},{text:"Amount",sortable:!1,value:"amount"},{text:"Payment method",sortable:!1,value:"paymentmethod"},{text:"balance",sortable:!1,value:"balance"}],selectDeletedItem:null,messageList:[],selectProduts:[],pictures:"",name:"",total:"",balance:"",Paymoney:"",payAgent:!1,agentId:"",selectedAgent:[],paymentMethod:["CASH","MOMO"],payment:"",loading:!1,openHistroy:!1,paymentHistoryData:[]}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].getAllAgents();case 3:a=t.sent,console.log(a.data.data),a.data.data.forEach((function(t){t.agentData.balance>=1e3?e.balance=(t.agentData.balance/1e3).toFixed(1)+"K":e.balance=t.agentData.balance,e.messageList.push({history:t.agentData.paymentLogs,approved:t.agentData.approved,balance:e.balance,invoiceId:t._id,firstName:t.firstName,lastName:t.lastName,code:t.code,email:t.email})})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},methods:{checkPaymentHistrory:function(e){var t=this;this.paymentHistoryData=[],e.forEach((function(e){var a=m()(e.createAt),n=m()(e.createAt),r=n.format("LT"),s=a.format("L"),i=r+" "+s;t.paymentHistoryData.push({time:i,amount:e.amount,paymentmethod:e.paymentmethod,balance:e.balance})})),this.openHistroy=!0},payAnAGentOPen:function(e){this.payAgent=!0,this.agentId=e.invoiceId,this.selectedAgent={balance:e.balance,firstName:e.firstName,lastName:e.lastName,code:e.code,email:e.email}},payAgentt:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,l["a"].PayAgent(e.agentId,{amount:e.Paymoney,paymentMethod:e.payment});case 4:a=t.sent,console.log(a),location.reload(!0),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},payingMethod:function(){this.open=!0},deleteItemFromInvoicesList:function(e){this.$refs.deleteConfirmationDialog.openDialog(),this.selectDeletedItem=e},ondeleteItemFromInvoicesList:function(){this.$refs.deleteConfirmationDialog.close();var e=this.messageList.indexOf(this.selectDeletedItem);this.messageList.splice(e,1)}}},v=d,f=(a("2838"),a("2877")),b=Object(f["a"])(v,s,i,!1,null,"601d2f49",null),g=b.exports,h={data:function(){return{search:""}},components:{agent:g}},y=h,C=Object(f["a"])(y,n,r,!1,null,null,null);t["default"]=C.exports},3786:function(e,t,a){"use strict";a("96cf");var n=a("1da1"),r=a("365c");t["a"]={signin:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(r["a"])().post("/api/auth/signin",e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)})))()},getAllAgents:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(r["a"])().get("/api/auth/users/AGENT"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))()},signup:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r["a"])().post("/api/auth/signup",e));case 1:case"end":return t.stop()}}),t)})))()},PayAgent:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(r["a"])().put("/api/auth/pay-agent/".concat(e),t));case 1:case"end":return a.stop()}}),a)})))()},updateName:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r["a"])().put("/api/auth/name",e));case 1:case"end":return t.stop()}}),t)})))()},updateEmail:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r["a"])().put("/api/auth/email",e));case 1:case"end":return t.stop()}}),t)})))()},updatePassword:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r["a"])().put("/api/auth/password",e));case 1:case"end":return t.stop()}}),t)})))()},updateDepartments:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r["a"])().put("/api/auth/departments",e));case 1:case"end":return t.stop()}}),t)})))()}}},"9da3":function(e,t,a){}}]);
//# sourceMappingURL=chunk-11a1db3b.54ee68f4.js.map